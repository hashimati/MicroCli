package ${pack};

import com.coxautodev.graphql.tools.SchemaParser;
import com.coxautodev.graphql.tools.SchemaParserBuilder;
import graphql.GraphQL;
import graphql.schema.GraphQLSchema;
import io.micronaut.context.annotation.Bean;
import io.micronaut.context.annotation.Factory;

import javax.inject.Singleton;

@Factory
class ${className}Factory {



    @Bean
    @Singleton
    fun graphQL(resolver: ${className}QueryResolver ): GraphQL
    {
        var builder: SchemaParserBuilder  = SchemaParser.newParser()
                .file("${entityName}.graphqls")
                .resolvers(resolver)

        var graphQLSchema :GraphQLSchema= builder.build().makeExecutableSchema();
        return GraphQL.newGraphQL(graphQLSchema).build();

    }
}